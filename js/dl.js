"use strict";jQuery.validator.addMethod("testUser",function(e){return/^\S[a-zA-Z0-9_\u4e00-\u9fa5]{1,7}$/.test(e)}),jQuery.validator.addMethod("testPw",function(e){return/^\S{6,20}$/.test(e)},"密码由6-20位非空格字符组成"),$(".denglu").validate({rules:{user:{required:!0,testUser:!0},pw:{required:!0,testPw:!0}},messages:{user:{required:"请输入用户名",testUser:"用户名由2-8位字符组成，包含字母，数字或汉字，不能出现空格"},pw:{required:"请输入密码",testPw:"密码长度只能在6-20位字符之间，不包含空格"}},submitHandler:function(){$.ajax({url:"../data/dl.php",method:"post",data:{username:$("#username").val(),password:$("#password").val()},success:function(e){1==(e=JSON.parse(e)).code?(setCookie("login",$("#username").val()),(e=localStorage.getItem("url"))?(location.href=e,localStorage.removeItem(e)):open("../html/shouye.html")):alert("用户名或密码错误!")},error:function(e){console.log(e)}})}});